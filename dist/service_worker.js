(async()=>{async function e(){try{const e=await fetch("https://api.basescan.org/api?module=account&action=tokentx&contractaddress=0x833589fcd6edb6e08f4c7c32d4f71b54bda02913&page=1&offset=20&startblock=0&endblock=99999999&sort=desc");if(!e.ok)throw new Error(`Fetch error, token txs info: ${e.status} ${e.statusText}`);const t=await e.json();let a=0,o=0;t.result.forEach((e=>{console.log(e.gasPrice),a+=parseInt(e.gasPrice),o++}));let r=a/o,s=Math.floor(parseInt(r)/1e6);if(!s)throw new Error("Gas price not found");if(chrome.action.setBadgeBackgroundColor({color:[0,79,246,255]}),s>9999)s=`${Math.round(s/1e3)}k`;else if(s>999){let e=(s/1e3).toFixed(1);s=e.length>3?`${Math.round(s/1e3)}k`:`${e}k`}chrome.action.setBadgeText({text:`${s}`})}catch(e){console.error("Error fetching base txs: ",e)}}chrome.runtime.onInstalled.addListener((()=>{chrome.alarms.create("fetchLatestBaseGas",{delayInMinutes:0,periodInMinutes:10})})),chrome.runtime.onStartup.addListener((()=>{e()})),chrome.alarms.onAlarm.addListener((t=>{"fetchLatestBaseGas"===t.name&&e()}))})();